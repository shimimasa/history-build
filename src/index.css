@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* ====== 全体レイアウト ====== */

  .hb-game-screen {
    @apply min-h-screen bg-slate-950 text-slate-50 flex flex-col;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
      sans-serif;
  }

  .hb-game-header {
    @apply flex flex-col md:flex-row items-start md:items-center justify-between px-8 pt-4 pb-2 gap-4;
  }

  .hb-game-title {
    @apply text-xl md:text-2xl font-semibold text-slate-50;
  }

  .hb-top-status {
    @apply flex flex-col md:flex-row items-start md:items-center gap-3 md:gap-6;
  }

  .hb-status-group {
    @apply flex flex-row flex-wrap gap-2;
  }

  .hb-status-badge {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full bg-slate-800/80 border border-slate-700 text-xs;
  }

  .hb-status-label {
    @apply text-slate-300;
  }

  .hb-status-value {
    @apply font-semibold text-amber-300;
  }

  .hb-turn-indicator {
    @apply flex flex-col items-start gap-1 text-sm;
  }

  .hb-turn-text {
    @apply text-slate-300;
  }

  .hb-phase-pill {
    @apply inline-flex items-center px-3 py-1 rounded-full bg-indigo-700/70 text-xs font-semibold;
  }

  /* ====== メインレイアウト：左サイドバー + 右ボード ====== */

  .hb-game-layout {
    @apply flex-1 px-6 pb-4 pt-2;
    display: grid;
    grid-template-columns: 260px minmax(0, 1fr);
    gap: 1.5rem;
    min-height: 0;
  }

  .hb-sidebar {
    @apply flex flex-col gap-4;
  }

  .hb-board {
    display: block; /* カード説明を sidebar に移すので1カラムでOK */
  }


  /* サイドバー下部に置くため細めレイアウトへ変更 */
.hb-card-detail-panel {
  margin-top: 1rem;
  padding: 1rem;
  max-height: 260px; /* CPUパネルに並ぶ高さ */
  overflow-y: auto;
}
  /* 右カラム（カード詳細＋ログ） */

  .hb-card-detail-panel {
    @apply flex flex-col gap-3;
    background: #050811;
    border-radius: 16px;
    box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.3);
    padding: 1rem 1.25rem;
    min-height: 0;
  }

  .hb-section-title {
    @apply text-sm font-semibold text-slate-200 mb-1;
  }

  /* ====== プレイヤーパネル ====== */

  .hb-player-panel {
    @apply bg-slate-900/80 border border-slate-700 rounded-2xl px-4 py-3 shadow-md flex flex-col gap-1 text-sm;
  }

  .hb-player-panel--compact {
    @apply opacity-80 text-xs;
  }

  .hb-panel-title {
    @apply text-slate-100 font-semibold mb-1;
  }

  .hb-panel-row {
    @apply flex items-center justify-between text-slate-300;
  }

  /* ====== サプライボード ====== */

  .hb-supply-board {
    background: #050811;
    border-radius: 16px;
    box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.3);
    padding: 1rem 1.25rem;
    display: grid;
  grid-template-columns: 240px 1fr; /* 左：基本カード, 右：王国カード広め */
  gap: 2rem;
    min-height: 0;
  }

  /* 左：基本カード（資源・勝利点）縦並び */

  .hb-basic-supply-column {
      /* 基本カードは左側で 2 列グリッド表示 */
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      grid-auto-rows: auto;
      gap: 1.2rem 1rem;
      align-content: flex-start;
    }

  /* 右：王国カード（人物・出来事）グリッド */

  .hb-kingdom-supply-grid,
  .hb-supply-kingdom-grid {
    /* 両方同じ意味にしておく（TS 側のクラス名ずれ対策） */
    display: grid;
    grid-template-columns: repeat(6, minmax(150px, 1fr));
    gap: 16px;
    align-content: flex-start;
    padding-right: 0.25rem;
  }

  .hb-supply-card {
    @apply relative w-full focus:outline-none cursor-pointer;
    align-self: flex-start;
  }

  .hb-supply-card--disabled {
    @apply cursor-not-allowed opacity-60;
  }

  .hb-supply-remaining-badge {
    position: absolute;
    top: 0.35rem;
    left: 0.5rem;
    font-size: 0.75rem;
    padding: 0.15rem 0.45rem;
    border-radius: 999px;
    background: rgba(15, 23, 42, 0.96);
    color: #fefce8;
    box-shadow: 0 0 0 1px rgba(250, 204, 21, 0.4);
  }

  .hb-supply-cost-row {
    margin-top: 0.3rem;
    display: flex;
    justify-content: flex-end;
  }

  /* ====== カード汎用スタイル ====== */

  /* 共通フレーム（王国カードサイズ基準） */
  .hb-card-frame {
    width: 100%;
    max-width: 160px;
    aspect-ratio: 2 / 3;
    margin: 0 auto;
  }

  /* 基本カード（資源・勝利点）は一回り小さく */
  .hb-supply-card-basic .hb-card-frame {
    max-width: 130px;
  }

  .hb-card {
    background: radial-gradient(circle at top, #1f2937, #020617);
    border-radius: 18px;
    padding: 0.4rem 0.4rem 0.45rem;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .hb-card--supply {
    @apply w-full;
  }

  /* 手札カードはサプライより少し小さく */
  .hb-card--hand {
    @apply w-full max-w-[135px];
  }

  .hb-card-image-wrapper {
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 3 / 4;
    margin-bottom: 0.3rem;
  }

  .hb-card-image {
    @apply w-full h-full object-cover block;
  }

  .hb-card-footer {
    @apply flex flex-col gap-1;
  }

  .hb-card-name-row {
    @apply flex items-center justify-between text-[0.85rem];
  }

  .hb-card-name {
    @apply font-semibold text-slate-100 truncate;
  }

  .hb-cost-badge {
    font-size: 0.7rem;
    padding: 0.1rem 0.4rem;
    border-radius: 999px;
    background: #fbbf24;
    color: #111827;
    font-weight: 600;
  }

  .hb-card-type-row {
    @apply flex justify-start;
  }

  .hb-card-type-badge {
    font-size: 0.7rem;
    padding: 0.1rem 0.35rem;
    border-radius: 999px;
    background: rgba(248, 250, 252, 0.12);
  }

  /* ====== カード詳細 ====== */

  .hb-card-detail-scroll {
    @apply flex-1 bg-slate-900/80 border border-slate-700 rounded-3xl px-4 py-3 overflow-y-auto;
  }

  .hb-card-detail-placeholder {
    @apply text-xs text-slate-400;
  }

  .hb-card-detail {
    @apply flex flex-col gap-1 text-sm text-slate-100;
  }

  .hb-card-detail-name {
    @apply text-base font-semibold;
  }

  .hb-card-detail-meta {
    @apply text-xs text-slate-300 flex flex-wrap gap-1;
  }

  .hb-card-detail-text {
    @apply text-xs text-slate-200 leading-relaxed mt-1;
  }

  .hb-detail-log-panel {
    @apply mt-3 flex flex-col gap-1;
  }

  /* ====== 手札エリア ====== */

  .hb-hand-area {
    @apply border-t border-slate-800 bg-slate-950/95 px-6 pt-3 pb-4 flex flex-col gap-2;
    min-height: 220px;
  }

  .hb-hand-header {
    @apply flex items-baseline justify-between;
  }

  .hb-hand-hint {
    @apply text-[11px] text-slate-400;
  }

  .hb-hand-cards,
  .hb-hand-scroll {
    /* クラス名ぶれ対策で両方同じ指定 */
    @apply flex flex-row gap-3 overflow-x-auto pb-1 px-1;
    justify-content: center;
  }

  .hb-hand-card {
    @apply w-[135px] flex-shrink-0 cursor-pointer transition-transform duration-150 ease-out;
  }

  .hb-hand-card:hover {
    @apply -translate-y-1;
  }

  .hb-hand-card--selected {
    @apply ring-2 ring-amber-400 ring-offset-2 ring-offset-slate-900;
  }

  /* ====== 手札アクションボタン ====== */

  .hb-hand-actions {
    @apply flex flex-row justify-end gap-12 px-24 pt-2;
  }

  .hb-btn {
    @apply px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-150;
  }

  .hb-btn-primary {
    @apply bg-emerald-600 hover:bg-emerald-500 text-white;
  }

  .hb-btn-secondary {
    @apply bg-slate-700 hover:bg-slate-600 text-slate-50;
  }

  /* ====== ログ ====== */

  .hb-log-scroll {
    @apply bg-slate-900/80 border border-slate-700 rounded-2xl px-3 py-2 text-xs text-slate-100 max-h-32 overflow-y-auto;
  }

  .hb-log-empty {
    @apply text-slate-400;
  }

  .hb-log-line {
    @apply leading-tight;
  }
}
