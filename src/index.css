@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== 既存の hb-app 系（今はほぼ未使用） ===== */
@layer components {
  .hb-app {
    @apply min-h-screen bg-slate-900 text-slate-100 flex flex-col;
  }

  .hb-header {
    @apply border-b border-slate-800 bg-slate-950/90 backdrop-blur;
  }

  .hb-header-inner {
    @apply w-full max-w-6xl mx-auto px-4 py-3 flex items-center justify-between;
  }

  .hb-header-title {
    @apply text-lg font-semibold tracking-wide;
  }

  .hb-header-turn {
    @apply flex items-center gap-2 text-sm;
  }

  .hb-main-board {
    @apply flex-1 w-full max-w-6xl mx-auto flex gap-4 px-4 py-4;
  }

  .hb-board-inner {
    @apply flex-1 flex gap-4;
  }

  .hb-log-panel {
    @apply w-72 border-l border-slate-800 pl-4 text-xs leading-relaxed;
  }

  .hb-log-panel h3 {
    @apply text-slate-200 font-semibold mb-2;
  }

  .hb-log-panel p {
    @apply text-slate-300;
  }

  /* ====== 共通カードスタイル ====== */
  .hb-card {
    @apply border border-slate-700 rounded-xl bg-slate-900/80 shadow-lg shadow-black/40 p-3;
  }

  .hb-card-frame {
    @apply relative w-full rounded-xl border border-slate-700 bg-slate-900/80 shadow-lg shadow-black/40;
  }

  .hb-card-inner {
    @apply flex flex-col gap-2 p-3;
  }

  .hb-card-title {
    @apply text-sm font-semibold tracking-wide;
  }

  .hb-card-type {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] border border-slate-600 bg-slate-800/60;
  }

  .hb-card-body {
    @apply text-xs leading-snug text-slate-200;
  }

  /* ====== ゲーム画面用レイアウト ====== */

  .hb-game-layout {
    @apply h-screen bg-slate-900 text-slate-100 flex flex-col;
  }

  .hb-game-header {
    @apply border-b border-slate-800 bg-slate-950/90 backdrop-blur flex flex-col gap-2;
  }

  .hb-game-header-top {
    @apply w-full max-w-6xl mx-auto px-4 pt-3 flex items-center justify-between;
  }

  .hb-game-title {
    @apply text-xl font-bold tracking-wide;
  }

  .hb-header-controls {
    @apply flex items-center gap-3;
  }

  .hb-header-pill {
    @apply px-4 py-1 rounded-full border border-slate-700 bg-slate-900/80 text-sm flex items-center gap-2;
  }

  .hb-header-pill-label {
    @apply text-xs text-slate-300;
  }

  .hb-header-pill-value {
    @apply text-sm font-semibold;
  }

  .hb-game-header-bottom {
    @apply w-full max-w-6xl mx-auto px-4 pb-3 flex items-center justify-between text-xs text-slate-300;
  }

  .hb-header-resources {
    @apply flex items-center gap-3;
  }

  .hb-resource-pill {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full border border-slate-700 bg-slate-900/80 text-xs;
  }

  .hb-resource-label {
    @apply text-[11px] text-slate-300;
  }

  .hb-resource-value {
    @apply text-lg font-bold;
  }

  /* フェーズバッジ色分け */
  .hb-phase-badge {
    @apply px-3 py-1 rounded-full text-xs font-semibold border;
  }
  .hb-phase-badge-draw { @apply bg-slate-800 border-slate-600 text-slate-100; }
  .hb-phase-badge-resource { @apply bg-amber-900 border-amber-500 text-amber-100; }
  .hb-phase-badge-action { @apply bg-sky-900 border-sky-500 text-sky-100; }
  .hb-phase-badge-buy { @apply bg-emerald-900 border-emerald-500 text-emerald-100; }
  .hb-phase-badge-cleanup { @apply bg-slate-800 border-slate-500 text-slate-100; }

  /* 中央 3 カラム */
  .hb-game-main {
    @apply flex-1 w-full flex justify-center overflow-hidden;
    @apply max-w-6xl mx-auto;
  }

  .hb-column {
    @apply h-full;
  }

  /* 左サイド：プレイヤー / CPU 情報 */
  .hb-player-panel {
    @apply w-56 flex-shrink-0 px-4 py-4 flex flex-col gap-3;
  }

  .hb-sidebar-panel {
    @apply hb-card text-xs;
    height: auto;
    align-self: flex-start;
  }

  .hb-sidebar-panel h3 {
    @apply text-sm font-semibold mb-2 border-b border-slate-700 pb-1;
  }

  .hb-sidebar-row {
    @apply flex justify-between py-0.5;
  }

  .hb-sidebar-label {
    @apply text-slate-300;
  }

  .hb-sidebar-value {
    @apply font-semibold;
  }

  /* 中央：サプライ＆プレイエリア */
  .hb-center-area {
    @apply flex-1 flex flex-col gap-3 px-0 py-3;
        max-height: calc(100vh - 260px); /* ヘッダー + 手札 + フッター 分 */
        /* 中央エリアの中だけ縦スクロールできるようにする */
        overflow-y: auto;
  }

  .hb-board-inner-main {
    @apply flex-1 flex gap-3 px-4;
  }

  .hb-supply-column {
    @apply flex-1 flex flex-col gap-3;
  }

  .hb-board-header {
    @apply text-sm font-semibold mb-1;
  }

  .hb-board-header-sub {
    @apply text-[11px] text-slate-400;
  }

  .hb-main-board {
    @apply hb-card flex-1 flex flex-col gap-2;
  }

  .hb-main-board-header {
    @apply flex items-center justify-between mb-1;
  }

  .hb-main-board-title {
    @apply text-sm font-semibold;
  }

  .hb-main-board-sub {
    @apply text-[11px] text-slate-400;
  }

  .hb-main-board-body {
    @apply flex-1 flex flex-col;
  }

  /* 右サイド：カード詳細パネル */
  .hb-detail-panel {
    @apply w-80 flex-shrink-0 px-4 py-4;
  }

  .hb-card-detail-panel {
    @apply hb-card text-xs;
  }

  .hb-card-detail-panel h3 {
    @apply text-sm font-semibold mb-2;
  }

  .hb-card-detail-body {
    @apply text-xs leading-relaxed text-slate-200;
  }

  /* サプライ全体のボード */
  .hb-supply-board {
    @apply w-full;
  }

  .hb-supply-layout {
    @apply flex gap-3 items-start;
  }

  /* 左側：基本カード（資源・国力）縦並び */
  .hb-supply-basic-column {
    @apply flex flex-col gap-2 flex-shrink-0;
    width: 140px;
  }

  /* 右側：王国カード（人物・出来事）のグリッド */
  .hb-supply-kingdom-grid {
    @apply grid gap-2;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  @screen md {
    .hb-supply-kingdom-grid {
      grid-template-columns: repeat(5, minmax(0, 1fr));
    }
  }

  /* プレイエリア（今後拡張用） */
  .hb-play-area {
    @apply mt-2 text-xs text-slate-300;
  }

  .hb-play-area-placeholder {
    @apply h-16 border border-dashed border-slate-700 rounded-lg flex items-center justify-center text-[11px] text-slate-500;
  }

  /* 手札エリア */
  .hb-hand-area {
    @apply border-t border-slate-800 bg-slate-950/95;
    flex-shrink: 0;
    max-height: 170px;
    position: relative;
  }

  .hb-hand-area-inner {
    @apply w-full max-w-6xl mx-auto px-4 pt-2 pb-2;
    height: 100%;
  }

  .hb-hand-header {
    @apply flex items-center justify-between border-b border-slate-800 pb-1 mb-2;
  }

  .hb-hand-title {
    @apply text-sm font-semibold;
  }

  .hb-hand-help {
    @apply text-[11px] text-slate-400;
  }

  .hb-hand-scroll {
    @apply flex justify-center gap-4 overflow-x-auto overflow-y-hidden pb-1;
    max-height: 170px;
  }

  .hb-hand-empty {
    @apply py-3 text-xs text-slate-300;
  }

  /* 手札のカードラッパ（ミニサイズ表示） */
  .hb-hand-card-wrapper {
    @apply shrink-0;
    transform: scale(0.62);
    transform-origin: top center;
  }

  /* フッター（ボタン） */
  .hb-footer {
    @apply border-t border-slate-800 bg-slate-950/90;
    flex-shrink: 0;
  }

  .hb-footer-inner {
    @apply w-full max-w-6xl mx-auto px-4 py-2 flex items-center justify-end gap-2;
  }

  .hb-footer-buttons {
    @apply flex flex-wrap gap-2;
  }

  .hb-footer-button {
    @apply px-4 py-2 rounded-full bg-sky-600 text-white text-sm font-semibold shadow-md shadow-sky-900/40 hover:bg-sky-500 transition-colors;
  }

  .hb-footer-button-muted {
    @apply px-3 py-2 rounded-full bg-slate-800 text-slate-200 text-xs border border-slate-600 hover:bg-slate-700 transition-colors;
  }

  /* ====== 共通ボタン ====== */
  .hb-btn {
    @apply inline-flex items-center justify-center gap-1 rounded-full border border-slate-600 bg-slate-900/80 px-3 py-1 text-xs font-medium text-slate-100 hover:bg-slate-800 transition-colors disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .hb-btn-primary {
    @apply border-sky-500 bg-sky-600 hover:bg-sky-500;
  }

  .hb-btn-danger {
    @apply border-rose-500 bg-rose-600 hover:bg-rose-500;
  }

  /* ====== CardView 共通 ====== */
  .hb-card-view {
    @apply flex flex-col h-full;
  }

  .hb-card-view-image-wrapper {
    @apply relative w-full overflow-hidden rounded-lg mb-2 bg-slate-800/70;
    padding-top: 140%;
  }

  .hb-card-view-body {
    @apply flex-1 flex flex-col gap-1;
  }

  .hb-card-view-name {
    @apply text-sm font-semibold leading-snug;
  }

  .hb-card-view-meta {
    @apply flex items-center justify-between text-[11px] text-slate-300 mt-0.5;
  }

  .hb-card-view-meta-left {
    @apply flex items-center gap-2;
  }

  .hb-card-view-meta-pill {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full border border-slate-600 bg-slate-900/60 text-[11px];
  }

  .hb-card-view-meta-cost {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-amber-900/80 text-amber-100 text-[11px];
  }

  .hb-card-view-text {
    font-size: 0.7rem;
    -webkit-line-clamp: 3;
  }

  /* 手札カード（旧レイアウト用・一部で使用） */
  .hb-hand-bar {
    @apply w-full border-t border-slate-800 
    bg-slate-900/95 flex items-center justify-center gap-2 px-4 py-2 text-xs;
  }

  .hb-hand-label {
    @apply font-semibold mr-2;
  }

  .hb-hand-inner {
    @apply flex gap-2 overflow-x-auto;
  }

  /* ログ / ガイドなど細かい表示 */
  .hb-log {
    @apply text-[11px] space-y-2;
  }

  .hb-help-panel {
    @apply text-[11px];
  }

  /* 手札エリア左上に重ねるフェーズガイド（未使用なら無視） */
  .hb-phase-guide {
    @apply absolute;
    left: 1rem;
    top: -4.5rem;
    width: 260px;
    pointer-events: none;
  }

  .hb-phase-guide .hb-card {
    @apply p-2;
  }

  .hb-phase-guide .hb-log {
    @apply text-[10px];
  }

  /* サプライカード（標準 & コンパクト） */
  .hb-supply-card {
    @apply hb-card p-3;
  }

  .hb-supply-card-compact {
    @apply hb-card p-2;
    max-width: 130px;
    max-height: 190px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .hb-supply-card-compact .hb-card-view {
    width: 130px;
  }

  .hb-supply-card-compact .hb-card-view-image-wrapper {
    height: 64px;
    max-height: 64px;
  }

  .hb-supply-card-compact .hb-card-view-name {
    font-size: 0.78rem;
  }

  .hb-supply-card-compact .hb-card-view-meta {
    font-size: 0.68rem;
  }

  .hb-supply-card-compact .hb-card-view-text {
    font-size: 0.7rem;
    -webkit-line-clamp: 3;
  }

  .hb-supply-card-selected {
    @apply ring-2 ring-sky-400 shadow-sky-500/40;
  }
}

/* Supply cards: slightly shorter art area for Dominion-like ratio */
.hb-supply-card .hb-card-view-image-wrapper {
  padding-top: 130%;
}
