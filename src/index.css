@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== History Build ゲーム画面用レイアウト ===== */
@layer components {
  /* ルートレイアウト */
  .hb-game-layout {
    @apply min-h-screen bg-slate-900 text-slate-100 flex flex-col;
  }

  /* ---------- ヘッダー ---------- */
  .hb-game-header {
    @apply border-b border-slate-800 bg-slate-950/90 backdrop-blur flex flex-col gap-2;
  }

  .hb-game-header-top {
    @apply w-full max-w-6xl mx-auto px-4 pt-3 flex items-center justify-between;
  }

  .hb-game-title {
    @apply text-xl font-bold tracking-wide;
  }

  .hb-game-status {
    @apply flex items-center gap-2 text-xs;
  }

  .hb-pill {
    @apply px-3 py-1 rounded-full border border-slate-700 bg-slate-900/80 text-xs flex items-center gap-1;
  }

  .hb-game-resources {
    @apply w-full max-w-6xl mx-auto px-4 pb-3 flex items-center gap-3;
  }

  .hb-resource-badge {
    @apply inline-flex flex-col px-3 py-1 rounded-xl border border-slate-700 bg-slate-900/80 text-xs;
  }

  .hb-resource-label {
    @apply text-[11px] text-slate-300;
  }

  .hb-resource-value {
    @apply text-lg font-bold;
  }

  /* フェーズバッジ色分け */
  .hb-phase-badge {
    @apply px-3 py-1 rounded-full text-xs font-semibold border;
  }
  .hb-phase-badge-draw { @apply bg-slate-800 border-slate-600 text-slate-100; }
  .hb-phase-badge-resource { @apply bg-amber-900 border-amber-500 text-amber-100; }
  .hb-phase-badge-action { @apply bg-sky-900 border-sky-500 text-sky-100; }
  .hb-phase-badge-buy { @apply bg-emerald-900 border-emerald-500 text-emerald-100; }
  .hb-phase-badge-cleanup { @apply bg-slate-800 border-slate-500 text-slate-100; }

  /* ---------- メイン 3 カラム ---------- */
  .hb-game-main {
    @apply flex-1 w-full max-w-6xl mx-auto flex gap-3 px-4 py-3 overflow-hidden;
  }

  .hb-column {
    @apply h-full;
  }

  /* 左サイド：プレイヤー / CPU */
  .hb-player-panel {
    @apply w-56 flex-shrink-0 px-0 py-1 flex flex-col gap-2;
  }

  .hb-sidebar-panel {
    @apply hb-card text-xs;
    height: auto;
    align-self: flex-start;
  }

  /* 右サイド：カード説明 */
  .hb-log-panel {
    @apply w-72 flex-shrink-0 px-0 py-1 text-xs leading-relaxed;
  }

  .hb-card-detail-panel {
    @apply hb-card text-xs;
  }

  /* 中央：サプライ & プレイエリア */
  .hb-center-area {
    @apply flex-1 flex flex-col gap-3 px-0 py-1;
  }

  .hb-supply-area {
    @apply flex-1;
  }

  .hb-play-area {
    @apply mt-2 text-xs text-slate-300;
  }

  .hb-play-area--hidden {
    @apply hidden;
  }

  .hb-play-area-compact {
    @apply opacity-60;
  }

  .hb-play-area-inner {
    @apply hb-card;
  }

  .hb-play-rows {
    @apply flex flex-col gap-3;
  }

  .hb-play-label {
    @apply text-[11px] text-slate-300 mb-1;
  }

  .hb-play-cards {
    @apply flex gap-2 overflow-x-auto;
  }

  .hb-play-card {
    @apply shrink-0 w-32;
  }

  .hb-play-empty {
    @apply text-[11px] text-slate-500;
  }

  .hb-play-summary {
    @apply mt-2 text-[11px] text-slate-300 flex gap-4;
  }

  /* ---------- 共通カード枠 ---------- */
  .hb-card {
    @apply border border-slate-700 rounded-xl bg-slate-900/80 shadow-lg shadow-black/40 p-3;
  }

  .hb-card-frame {
    @apply relative w-full rounded-xl border border-slate-700 bg-slate-900/80 shadow-lg shadow-black/40;
  }

  .hb-card-body {
    @apply text-xs leading-snug text-slate-200;
  }

  /* ---------- サプライボード ---------- */
  .hb-supply-board {
    @apply w-full;
  }

  .hb-supply-layout {
    @apply flex gap-3 items-start;
  }

  /* 左側：基本カード（資源・国力）縦並び */
  .hb-supply-basic-column {
    @apply flex flex-col gap-2 flex-shrink-0;
    width: 150px;
  }

  /* 右側：王国カード（人物・出来事）のグリッド */
  .hb-supply-kingdom-grid {
    @apply grid gap-2;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  @screen md {
    .hb-supply-kingdom-grid {
      grid-template-columns: repeat(5, minmax(0, 1fr));
    }
  }

  /* サプライカード（標準 & コンパクト） */
  .hb-supply-card {
    @apply hb-card p-3;
  }

  .hb-supply-card-compact {
    @apply hb-card p-2;
    max-width: 130px;
    max-height: 190px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .hb-supply-card-compact .hb-card-view {
    width: 130px;
  }

  .hb-supply-card-compact .hb-card-view-image-wrapper {
    height: 64px;
    max-height: 64px;
  }

  .hb-supply-card-compact .hb-card-view-name {
    font-size: 0.78rem;
  }

  .hb-supply-card-compact .hb-card-view-meta {
    font-size: 0.68rem;
  }

  .hb-supply-card-compact .hb-card-view-text {
    font-size: 0.7rem;
    -webkit-line-clamp: 3;
  }

  .hb-supply-card-selected {
    @apply ring-2 ring-sky-400 shadow-sky-500/40;
  }

  /* ---------- CardView 共通 ---------- */
  .hb-card-view {
    @apply flex flex-col h-full;
  }

  .hb-card-view-inner {
    @apply p-2;
  }

  .hb-card-art-wrapper {
    @apply p-3 pb-2;
  }

  .hb-card-view-image-wrapper {
    @apply relative w-full overflow-hidden rounded-lg mb-2 bg-slate-800/70;
    padding-top: 135%;
  }

  .hb-card-view-image {
    @apply absolute inset-0 w-full h-full object-cover;
  }

  .hb-card-view-image-placeholder {
    @apply absolute inset-0 flex items-center justify-center text-xs text-slate-300;
  }

  .hb-card-view-cost {
    @apply absolute bottom-1 right-1 px-2 py-0.5 rounded-full bg-amber-900/80 text-[11px] text-amber-100;
  }

  .hb-card-view-body {
    @apply flex-1 flex flex-col gap-1 pb-2 px-3;
  }

  .hb-card-view-header {
    @apply flex items-center justify-between gap-1;
  }

  .hb-card-view-name {
    @apply text-sm font-semibold leading-snug;
  }

  .hb-card-view-type {
    @apply px-2 py-0.5 rounded-full bg-slate-800 text-[11px];
  }

  .hb-card-view-meta {
    @apply flex items-center justify-between text-[11px] text-slate-300 mt-0.5;
  }

  .hb-card-view-text {
    font-size: 0.7rem;
    line-height: 1.1;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-align: left;
  }

  .hb-card-view-footer {
    @apply flex items-center justify-between border-t border-slate-700 pt-1 px-3 pb-2 text-[11px];
  }

  .hb-card-view-footer-status {
    @apply text-slate-300;
  }

  .hb-card-view-footer-button {
    @apply px-3 py-1 rounded-full bg-emerald-600 text-[11px] font-semibold text-white disabled:bg-slate-700 disabled:opacity-50;
  }

  .hb-card-view-remaining-badge {
    @apply absolute top-1 left-1 px-2 py-0.5 rounded-full bg-slate-900/80 text-[11px];
  }

  .hb-card-view--highlight {
    @apply ring-2 ring-emerald-400;
  }

  .hb-card-view--disabled {
    @apply opacity-60 cursor-not-allowed;
  }

  /* ---------- 手札エリア ---------- */
  .hb-hand-area {
    @apply border-t border-slate-800 bg-slate-950/95;
    flex-shrink: 0;
    max-height: 190px;
    position: relative;
  }

  .hb-hand-area-inner {
    @apply w-full max-w-6xl mx-auto px-4 pt-2 pb-2;
    height: 100%;
  }

  .hb-hand-header {
    @apply flex items-center justify-between border-b border-slate-800 pb-1 mb-2;
  }

  .hb-hand-scroll {
    @apply flex justify-center gap-4 overflow-x-auto overflow-y-hidden pb-1;
    max-height: 160px;
  }

  .hb-hand-empty {
    @apply py-3 text-xs text-slate-300;
  }

  .hb-hand-card-wrapper {
    @apply shrink-0;
    transform: scale(0.75);
    transform-origin: top center;
  }

  .hb-hand-card {
    @apply cursor-pointer transition-transform;
  }

  .hb-hand-card-selected {
    @apply ring-2 ring-sky-400;
  }

  /* ---------- フッター（ボタン） ---------- */
  .hb-footer {
    @apply border-t border-slate-800 bg-slate-950/90;
    flex-shrink: 0;
  }

  .hb-footer-inner {
    @apply w-full max-w-6xl mx-auto px-4 py-2 flex items-center justify-end;
  }

  .hb-footer-buttons {
    @apply flex flex-wrap gap-2;
  }

  .hb-footer-button {
    @apply px-4 py-2 rounded-full text-sm font-semibold shadow-md transition-colors;
  }

  .hb-footer-button-primary {
    @apply bg-sky-600 text-white shadow-sky-900/40 hover:bg-sky-500;
  }

  .hb-footer-button-secondary {
    @apply bg-emerald-600 text-white shadow-emerald-900/40 hover:bg-emerald-500;
  }

  .hb-footer-button-muted {
    @apply bg-slate-800 text-slate-200 text-xs border border-slate-600 hover:bg-slate-700;
  }

  /* 汎用ボタン */
  .hb-btn {
    @apply inline-flex items-center justify-center gap-1 rounded-full border border-slate-600 bg-slate-900/80 px-3 py-1 text-xs font-medium text-slate-100 hover:bg-slate-800 transition-colors disabled:opacity-40 disabled:cursor-not-allowed;
  }

  .hb-btn-primary {
    @apply border-sky-500 bg-sky-600 hover:bg-sky-500;
  }

  .hb-btn-danger {
    @apply border-rose-500 bg-rose-600 hover:bg-rose-500;
  }
}

/* ===== サプライカードだけ少し横長にして、人物/出来事との高さ差を出す ===== */
.hb-supply-card .hb-card-view-image-wrapper {
  padding-top: 115%; /* もとの 130% より少し横長 */
}
